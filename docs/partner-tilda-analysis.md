## Tilda (tilda.cc) — глубокий анализ для партнёрства с «Белая Кость»

Этот документ описывает возможности и ограничения Tilda (включая Tilda Store), релевантные для интеграции с нашим мобильным приложением «Камчатка», и предлагает варианты сотрудничества с честными плюсами/минусами.

### 1) Платформа и ключевые модули
- **Хостинг и CDN**: страничный конструктор, публикация на домене партнёра, отдача статики через CDN `*.tildacdn.net`/`*.tildacdn.com`.
- **Tilda Store (e‑commerce)**: карточки товаров, корзина, оформление заказа, интеграции с эквайрингами (Stripe/CloudPayments/ЮKassa/Сбер и др.).
- **Формы и Tilda CRM**: сбор лидов, отправка в e‑mail/Google Sheets/веб‑хуки, базовые статусы.
- **Контент‑API**: получение проекта/страниц/контента по API (Public/Secret ключи). Подходит для headless‑чтения.
- **Фиды каталога**: экспорт товаров в CSV/YML (для маркетплейсов/мерчанта). Часто используется как универсальный фид.
- **Аналитика**: GA4/Я.Метрика/пиксели, события магазина и конверсии.

### 2) Доступные интерфейсы интеграции
- **Content API**: выдаёт структуру проектов, список страниц, полные данные блоков (Zero Block), изображения (ссылки на CDN). Нужны `publickey` и `secretkey` + `projectid`.
- **Store / Orders**:
  - Товары: обычно доступны через **CSV/YML**‑фид или специализированные методы экспорта.
  - Заказы: доступны **на чтение** (экспорт/Sheets/веб‑хук). Создание заказа программно у Tilda стандартно ограничено (нет публичного API «создать заказ»). В большинстве интеграций используется редирект на веб‑чекаут.
- **Формы/веб‑хуки**: отправка payload на наш endpoint, альтернативно — Google Sheets с периодической выгрузкой.

### 3) Сильные стороны Tilda для партнёрства
- Быстрый запуск витрины, готовые платежные интеграции.
- Простая выдача каталога через фид (CSV/YML) или Content API.
- Надёжная статика через CDN, понятный SEO‑контур (мета/каноникалы/сниппеты).
- Простые webhooks/Sheets для отчётности по заказам и лидам.

### 4) Ограничения, влияющие на архитектуру
- Отсутствие публичного API для **создания** заказа → нативный чекаут требует гибридов (корзина в приложении → веб‑оплата) или отдельного бэкенда у партнёра.
- Управление остатками и вариативностью товаров — базовое; возможны расхождения при частых обновлениях без веб‑хуков/инвалидации.
- Кастомизация чекаута ограничена рамками Tilda; внешние плагины — только через встроенные скрипты/HTML‑блоки.

### 5) Варианты сотрудничества (A → C), честные плюсы/минусы

#### Вариант A — реферальный трафик (WebView/браузер + UTM + промокод)
- **Что делаем**: экран/плитки «Белая Кость» в приложении; диплинки на разделы/товары с `utm_source=kamchatka_app&uid=...`; единый промокод.
- **Плюсы**:
  - Запуск 1–3 дня; без доработок Tilda.
  - Сохраняется текущий чекаут и процессы у партнёра.
  - Простая атрибуция по UTM/промокоду.
- **Минусы**:
  - Конверсия мобильного веба ниже нативной.
  - Потери атрибуции: промокод забывают/чистят cookies.
  - UX зависит от скорости сайта и стабильности Tilda/CDN.

#### Вариант B — нативный каталог + веб‑чекаут
- **Что делаем**: забираем каталог через CSV/YML/Content API → наш BFF кэширует и нормализует → нативные экраны категорий/поиска/карточек; кнопка «Купить» открывает Tilda‑чекаут с UTM/промокодом. Заказы забираем на чтение (webhook/Sheets/API) для отчётности.
- **Плюсы**:
  - Быстрее интерфейс, лучше вовлечённость (нативный UI, оффлайн‑кэш).
  - Нагрузка на сайт ниже, стабильная витрина.
  - Сохранение текущей платёжной схемы у партнёра.
- **Минусы**:
  - Требуются ключи/фид и регулярная синхронизация остатков и цен.
  - Возможны краткосрочные расхождения (решаем кэшем 5–10 мин + принудительная инвалидизация).
  - Чекаут остаётся вебовым, часть пользователей может «отваливаться» на редиректе.

#### Вариант C — нативная корзина и оформление (при наличии backend‑endpoint у партнёра)
- **Что делаем**: корзина/доставка CDEK/оплата — нативно; заказ создаётся у партнёра через отдельный backend‑endpoint (не Tilda Store API). Если endpoint недоступен, используем гибрид: корзина в приложении → безопасный редирект на оплату Tilda.
- **Плюсы**:
  - Максимальная конверсия и контроль UX; пуш‑статусы и повторные покупки.
  - Богатая аналитика и персонализация в приложении.
- **Минусы**:
  - Потребуется выделенный API у партнёра (или наша агентская схема) и юридическая проработка (оплата/возвраты/ПДн).
  - Бóльшие сроки внедрения и совместное SLA.

### 6) Рекомендуемая схема данных (для Варианта B)
```
productId, sku, title, description, price, oldPrice?, currency,
images[], category, stock, attributes[{name,value}], url, updatedAt
```
— Минимум, достаточный для витрины и синхронизации.

### 7) Технические рекомендации партнёру (качество/SEO/перф)
- **Медиа**: WebP/AVIF, responsive‑изображения, lazy‑load; не более 2–3 шрифтовых семейств, локальный subset.
- **Zero Block**: группировать слои, избегать тяжёлых анимаций на мобилке, проверять CLS/LCP (PageSpeed).
- **Каталог**: единые SKU/категории, alt‑тексты, микроразметка, каноникалы; UTM‑баннер с промокодом для трафика из приложения.
- **Чекаут**: короткие формы, автоподстановка города для CDEK, явные способы оплаты, видимый промокод.

### 8) Данные/доступы, которые нужны для старта
- API‑ключи Tilda (Public/Secret) и ID проекта/магазина **или** ссылку на фид CSV/YML.
- Схема постбэка заказов: webhook/Google Sheets/API (order_id, сумма, статус, utm, промокод, created_at).
- Медиа‑набор (изображения ≥1000px, бренд‑гайд), промокод и правила скидок.

### 9) План внедрения
- **Неделя 1**: Вариант A — экран в приложении, UTM/промокод, аналитика; старт пилота.
- **Недели 2–4**: Вариант B — BFF, кэш, нативный каталог; постбэк заказов; общий дашборд.
- **Недели 5–8 (опционально)**: Вариант C — нативный чекаут при наличии программного приёма заказа у партнёра.

### 10) KPI и отчётность
- CTR из приложения ≥3–5%, конверсия к заказу ≥2–4%, ROMI ≥200%.
- Еженедельные отчёты: клики → корзины → оплаты → выручка; доля промокода/UTM, средний чек.

### 11) Риски и их обработка
- **Потери атрибуции (A/B)**: UTM + промокоды + ремайндеры на сайте; сверка отчётов (приложение/сайт).
- **Расхождение цен/остатков (B)**: TTL кэша 5–10 мин, ручная инвалидизация, алерты при рассинхронизации.
- **Отсутствие API создания заказа (C)**: гибридный флоу или выделенный backend у партнёра/агентская схема.

---
Ключевой вывод: для Tilda оптимальный путь — быстро стартовать с **A**, затем перейти на **B** (нативный каталог + веб‑чекаут). **C** возможен при наличии серверного endpoint у партнёра для приёма заказов.

